{"version":3,"sources":["features/AppBase/user/services/auth.service.js","features/AppBase/user/actions/auth.js","Firebase.js","Pages/SignUp.module.css","Pages/SignUpGoogle.js"],"names":["username","email","password","confirmpassword","birthdate","avatar","axios","post","then","response","console","log","localStorage","setItem","JSON","stringify","data","isgoogle","removeItem","register","dispatch","AuthService","type","REGISTER_SUCCESS","SET_MESSAGE","payload","message","Promise","resolve","error","toString","REGISTER_FAIL","reject","registerg","REGISTERG_SUCCESS","login","LOGIN_SUCCESS","user","LOGIN_FAIL","loging","logout","LOGOUT","auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","GoogleAuthProvider","module","exports","SignUpGoogle","useState","userexists","setuserexists","Date","setbirthdate","useDispatch","history","useHistory","socketRef","useRef","fireUsr","currentUser","displayName","photoURL","useEffect","current","io","connect","emit","on","mybool","push","catch","disconnect","className","styles","page","logo","src","alt","onClick","signUp","title","form","value","onChange","e","target","label","defaultValue","InputLabelProps","shrink","variant","size","color","preventDefault","window","location","reload"],"mappings":"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","file":"static/js/15.324e7503.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst API_URL = \"http://localhost:4000/\";\r\n\r\n\r\nconst register = (username, email, password, confirmpassword, birthdate, avatar) => {\r\n  return axios.post(\"http://localhost:4000/user/signup\", {\r\n    username,\r\n    email,\r\n    password,\r\n    confirmpassword,\r\n    birthdate,\r\n    avatar,\r\n  }).then((response) => {\r\n    \r\n      console.log('local storage')\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n\r\n    return response.data;\r\n  });\r\n};\r\n\r\nconst registerg = (username, email, birthdate, avatar, isgoogle) => {\r\n  return axios.post(\"http://localhost:4000/user/signupg\", {\r\n    username,\r\n    email,\r\n    birthdate,\r\n    avatar,\r\n    isgoogle,\r\n  }).then((response) => {\r\n    \r\n      console.log('local storage')\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n\r\n    return response.data;\r\n  });\r\n};\r\n\r\nconst login = (email, password) => {\r\n  console.log('im here')\r\n  return axios.post(\"http://localhost:4000/user/login\", {\r\n      email,\r\n      password,\r\n    })\r\n    .then((response) => {\r\n        console.log('local storage')\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n      return response.data; \r\n    });\r\n};\r\n\r\nconst loging = (email) => {\r\n  console.log('im here')\r\n  return axios.post(\"http://localhost:4000/user/loging\", {\r\n      email,\r\n    })\r\n    .then((response) => {\r\n        console.log('local storage')\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n      return response.data; \r\n    });\r\n};\r\n\r\n\r\nconst UpdatePassword = (id, email, password, newpassword) => {\r\n  console.log('updatin password first')\r\n  return axios.post(\"http://localhost:4000/user/updatepassword\", {\r\n      id,\r\n      email,\r\n      password,\r\n      newpassword\r\n    }).then((response) => {\r\n      localStorage.removeItem(\"user\");\r\n      window.location.reload(false);\r\n    });\r\n};\r\n\r\nconst logout = () => {\r\n  localStorage.removeItem(\"user\");\r\n  console.log('were loggin out')\r\n};\r\n\r\nexport default {\r\n  register,\r\n  registerg,\r\n  login,\r\n  loging,\r\n  logout,\r\n  UpdatePassword\r\n};\r\n","import {\r\n  REGISTER_SUCCESS,\r\n  REGISTERG_SUCCESS,\r\n  REGISTER_FAIL,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOGOUT,\r\n  SET_MESSAGE,\r\n  UPDATEPASSWORD\r\n} from \"./types\";\r\n\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nexport const register = (username, email, password, confirmpassword, birthdate, avatar) => (dispatch) => {\r\n  return AuthService.register(username, email, password, confirmpassword, birthdate, avatar).then(\r\n    (response) => {\r\n      dispatch({\r\n        type: REGISTER_SUCCESS,\r\n      });\r\n\r\n      dispatch({\r\n        type: SET_MESSAGE,\r\n        payload: response.data.message,\r\n      });\r\n\r\n      return Promise.resolve();\r\n    },\r\n    (error) => {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n\r\n      dispatch({\r\n        type: REGISTER_FAIL,\r\n      });\r\n\r\n      dispatch({\r\n        type: SET_MESSAGE,\r\n        payload: message,\r\n      });\r\n\r\n      return Promise.reject();\r\n    }\r\n  );\r\n};\r\n\r\nexport const registerg = (username, email,  birthdate, avatar, isgoogle) => (dispatch) => {\r\n  return AuthService.registerg(username, email, birthdate, avatar, isgoogle).then(\r\n    (response) => {\r\n      dispatch({\r\n        type: REGISTERG_SUCCESS,\r\n      });\r\n\r\n      dispatch({\r\n        type: SET_MESSAGE,\r\n        payload: response.data.message,\r\n      });\r\n\r\n      return Promise.resolve();\r\n    },\r\n    (error) => {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n\r\n      dispatch({\r\n        type: REGISTER_FAIL,\r\n      });\r\n\r\n      dispatch({\r\n        type: SET_MESSAGE,\r\n        payload: message,\r\n      });\r\n\r\n      return Promise.reject();\r\n    }\r\n  );\r\n};\r\n\r\nexport const login = (email, password) => (dispatch) => {\r\n  return AuthService.login(email, password).then(\r\n    (data) => {\r\n      dispatch({\r\n        type: LOGIN_SUCCESS,\r\n        payload: { user: data },\r\n      });\r\n\r\n      return Promise.resolve();\r\n    },\r\n    (error) => {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n\r\n      dispatch({\r\n        type: LOGIN_FAIL,\r\n      });\r\n\r\n      dispatch({\r\n        type: SET_MESSAGE,\r\n        payload: message,\r\n      });\r\n\r\n      return Promise.reject();\r\n    }\r\n  );\r\n};\r\n\r\nexport const loging = (email) => (dispatch) => {\r\n  return AuthService.loging(email).then(\r\n    (data) => {\r\n      dispatch({\r\n        type: LOGIN_SUCCESS,\r\n        payload: { user: data },\r\n      });\r\n\r\n      return Promise.resolve();\r\n    },\r\n    (error) => {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n\r\n      dispatch({\r\n        type: LOGIN_FAIL,\r\n      });\r\n\r\n      dispatch({\r\n        type: SET_MESSAGE,\r\n        payload: message,\r\n      });\r\n\r\n      return Promise.reject();\r\n    }\r\n  );\r\n};\r\n\r\nexport const logout = () => (dispatch) => {\r\n  AuthService.logout();\r\n  console.log('logout action auth.js')\r\n  dispatch({\r\n    type: LOGOUT,\r\n  });\r\n};\r\n\r\nexport const updatePass = (user, password, newpassword) => (dispatch) => {\r\n  AuthService.UpdatePassword(user.id, user.email, password, newpassword);\r\n  console.log('update password second')\r\n  dispatch({\r\n    type: UPDATEPASSWORD,\r\n  });\r\n};\r\n","import firebase from 'firebase' ;\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyBFuAru3tgBnO5-e3lqz1ELSv_J23VhutM\",\r\n    authDomain: \"kimy-online-classroom.firebaseapp.com\",\r\n    projectId: \"kimy-online-classroom\",\r\n    storageBucket: \"kimy-online-classroom.appspot.com\",\r\n    messagingSenderId: \"538402468977\",\r\n    appId: \"1:538402468977:web:d467f620db54ddfcbb17d0\"\r\n  };\r\n\r\n  \r\n  const firebaseapp = firebase.initializeApp(firebaseConfig) ; \r\n  const db = firebaseapp.firestore() ; \r\n  const auth = firebase.auth();\r\n\r\n  export {auth}\r\n\r\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\r\nexport const signInWithGoogle = () => {\r\n  \r\n  auth.signInWithPopup(googleProvider).then((res) => {\r\n    console.log(res.user);\r\n    console.log('hola')\r\n    var usr = auth.currentUser;\r\n        console.log('gola');\r\n        console.log(usr);\r\n       // console.log(\"  Name: \" + usr.name);\r\n    console.log(\"  Email: \" + usr.email);\r\n  }).catch((error) => {\r\n    console.log(error.message)\r\n  })\r\n}\r\n  export default db ;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"SignUp_logo__3XdOX\",\"form\":\"SignUp_form__11Q7G\",\"page\":\"SignUp_page__3eBIE\",\"or\":\"SignUp_or__3Juz-\",\"sign\":\"SignUp_sign__YgG2I\",\"signIn\":\"SignUp_signIn__2kX_z\",\"signInwg\":\"SignUp_signInwg__3hItV\",\"signUp\":\"SignUp_signUp__4zP_b\",\"icons\":\"SignUp_icons__28h-B\",\"icon\":\"SignUp_icon__mhSjb\",\"linkedin\":\"SignUp_linkedin__3ocFh\",\"github\":\"SignUp_github__3eiMN\",\"twitter\":\"SignUp_twitter__3IXRN\",\"text_field\":\"SignUp_text_field__11ffz\",\"signup_grey\":\"SignUp_signup_grey__4hQ7G\",\"signup_link\":\"SignUp_signup_link__2psTj\",\"tos\":\"SignUp_tos__2o7C3\",\"title\":\"SignUp_title__hvC_Z\",\"divider\":\"SignUp_divider__3JUup\"};","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport \"./Login.css\";\r\nimport { loging } from \"../features/AppBase/user/actions/auth.js\";\r\nimport styles from \"./SignUp.module.css\";\r\nimport FileBase from \"react-file-base64\";\r\nimport firebase from 'firebase' ;\r\nimport { auth } from \"../Firebase\";\r\nimport { Button, Divider } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { registerg } from \"../features/AppBase/user/actions/auth.js\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport io from \"socket.io-client\";\r\nimport { useEffect } from \"react\";\r\nimport { useRef } from \"react\";\r\n\r\n\r\nfunction SignUpGoogle() {\r\n  const [userexists, setuserexists] = useState(false);\r\n  const [birthdate, setbirthdate] = useState(new Date());\r\n  const [avatar, setavatar] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const socketRef = useRef();\r\n  const fireUsr= auth.currentUser\r\n  const email = fireUsr.email\r\n  const isgoogle= true\r\n  console.log(fireUsr.displayName)\r\n  console.log(fireUsr.email)\r\n  console.log(fireUsr.photoURL)\r\n  console.log(userexists)\r\n  useEffect(() => {\r\n\r\n    socketRef.current = io.connect(\"http://localhost:4000\");\r\n    socketRef.current.emit(\"find me user\", { email });\r\n    socketRef.current.on(\"result of user\", ({ mybool }) => {\r\n      console.log('socket returning result')\r\n      console.log(mybool)\r\n      setuserexists(mybool);\r\n    });\r\n    if(userexists){\r\n      dispatch(loging(email))\r\n        .then(() => {\r\n          history.push('/app/courses')\r\n        })\r\n        .catch(() => {\r\n        });\r\n    }\r\n    return () => socketRef.current.disconnect();\r\n  });\r\n\r\nconst handleRegister = (e) => {\r\n  e.preventDefault();\r\n  console.log(avatar)\r\n\r\n    dispatch(registerg(fireUsr.displayName, fireUsr.email, birthdate, fireUsr.photoURL, isgoogle))\r\n      .then(() => {\r\n        history.push('/app/courses')\r\n        window.location.reload(false);\r\n      })\r\n      .catch(() => {\r\n      });\r\n\r\n};\r\n\r\n\r\n  return (\r\n    <div className={styles.page}>\r\n      <img\r\n        className={styles.logo}\r\n        src=\"./logo.png\"\r\n        alt=\"KIMY\"\r\n        onClick={() => history.push(\"/\")}\r\n      />\r\n      <div className={styles.signUp}>\r\n      <h2 className={styles.title}>Hello</h2>\r\n      <h2 className={styles.title}>{auth.currentUser.displayName}</h2>\r\n      <h4 className={styles.title}>Please provide us your birthdate</h4>\r\n        <form className={styles.form}>\r\n          \r\n\r\n          <TextField\r\n            value={birthdate}\r\n            onChange={(e) => setbirthdate(e.target.value)}\r\n            label=\"Birthdate\"\r\n            type=\"date\"\r\n            defaultValue=\"2017-05-24\"\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n\r\n          <Button\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            color=\"primary\"\r\n            onClick={handleRegister}\r\n          >\r\n            Continue\r\n          </Button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignUpGoogle;\r\n"],"sourceRoot":""}